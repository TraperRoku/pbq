<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Osobowo≈õci PBQ (126 pyta≈Ñ)</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --bg: #f1f5f9;
            --card: #ffffff;
            --text: #1e293b;
            --accent: #3b82f6;
        }
        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--text);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
            min-height: 100vh;
        }
        .container {
            max-width: 850px;
            margin: 0 auto;
            background: var(--card);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 { 
            text-align: center; 
            color: var(--primary); 
            margin-bottom: 15px;
            font-size: 2.5rem;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        h3 {
            text-align: center;
            color: #475569;
            font-weight: 600;
            line-height: 1.8;
            background: linear-gradient(135deg, #e0f2fe 0%, #dbeafe 100%);
            padding: 25px;
            border-radius: 12px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        p.intro { 
            text-align: center; 
            color: #64748b; 
            margin-bottom: 20px;
            font-size: 1.1rem;
        }
        
        .question-item {
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(to right, #ffffff 0%, #f8fafc 100%);
            border-radius: 12px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
        }
        .question-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .question-text {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 18px;
            color: var(--text);
        }
        .options-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 12px;
        }
        .option-label {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .option-label:hover {
            transform: scale(1.05);
        }
        .scale-val {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            border-radius: 12px;
            font-weight: bold;
            font-size: 1.3rem;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        input[type="radio"] { display: none; }
        input[type="radio"]:checked + .scale-val {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border-color: var(--primary);
            transform: scale(1.15);
            box-shadow: 0 4px 15px rgba(37,99,235,0.4);
        }
        .scale-desc {
            font-size: 0.75rem;
            text-align: center;
            margin-top: 6px;
            color: #64748b;
            font-weight: 500;
        }

        button#calc-btn {
            display: block;
            width: 100%;
            padding: 22px;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: white;
            font-size: 1.3rem;
            font-weight: 700;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            margin-top: 50px;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        button#calc-btn:hover { 
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.4);
        }
        button#calc-btn:active {
            transform: translateY(-1px);
        }

        #results-section {
            display: none;
            margin-top: 60px;
            border-top: 4px solid var(--primary);
            padding-top: 40px;
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        #results-section h2 {
            text-align: center;
            color: var(--primary);
            font-size: 2rem;
            margin-bottom: 40px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        .chart-container {
            margin-bottom: 35px;
            padding: 25px;
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border: 2px solid #e2e8f0;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
        }
        .chart-container:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(0,0,0,0.12);
        }
        .chart-title {
            font-weight: 700;
            font-size: 1.2rem;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 10px;
            border-bottom: 2px solid #e2e8f0;
        }
        .score-text { 
            color: var(--primary); 
            font-weight: 700;
            font-size: 1.1rem;
        }
        #error-box {
            color: #ef4444;
            text-align: center;
            display: none;
            margin-top: 25px;
            padding: 15px;
            background: #fee2e2;
            border-radius: 10px;
            border: 2px solid #fca5a5;
            font-weight: 600;
        }

        @media (max-width: 640px) {
            body { padding: 10px; }
            .container { padding: 25px; }
            h1 { font-size: 1.8rem; }
            h3 { font-size: 0.95rem; padding: 20px; }
            .options-grid { gap: 8px; }
            .scale-val { 
                width: 40px; 
                height: 40px;
                font-size: 1.1rem;
            }
            .scale-desc { font-size: 0.65rem; }
            button#calc-btn { 
                font-size: 1.1rem; 
                padding: 18px;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>üìã Kwestionariusz PBQ</h1>
    <p class="intro">
        Spr√≥buj oceniƒá, jak czujesz siƒô w zwiƒÖzku z ka≈ºdym zdaniem <strong>PRZEZ WIƒòKSZO≈öƒÜ CZASU</strong><br>
        <strong>JAK BARDZO W TO WIERZYSZ?</strong>
    </p>
    <h3>
        Skala:<br> 
        <strong>4 (Ca≈Çkowicie siƒô z tym zgadzam)</strong><br>
        <strong>3 (Mocno siƒô z tym zgadzam)</strong><br>
        <strong>2 (Umiarkowanie siƒô zgadzam)</strong><br>
        <strong>1 (S≈Çabo siƒô zgadzam)</strong><br>
        <strong>0 (Wcale siƒô nie zgadzam)</strong>
    </h3>
    <form id="pbqForm">
        <div id="questions-list"></div>
    </form>
    
    <div id="error-box">
        ‚ö†Ô∏è Uzupe≈Çnij wszystkie odpowiedzi przed obliczeniem wyniku!
    </div>

    <button id="calc-btn" onclick="calculatePBQ()">üìä Oblicz Wynik i Zobacz Wyniki</button>

    <div id="results-section">
        <h2>üéØ Tw√≥j Profil Osobowo≈õci</h2>
        <div id="charts-area"></div>
    </div>
</div>

<script>
    // 1. Baza danych pyta≈Ñ (wyciƒÖgniƒôte z Twojego PDF)
   const rawQuestions = [
  "Jestem nieudolny/a spo≈Çecznie i niepo≈ºƒÖdany/a w sytuacjach zawodowych lub towarzyskich.",
  "Inni ludzie sƒÖ potencjalnie krytyczni, obojƒôtni, poni≈ºajƒÖcy lub odrzucajƒÖcy.",
  "Nie potrafiƒô znie≈õƒá nieprzyjemnych uczuƒá.",
  "Je≈õli ludzie zbli≈ºƒÖ siƒô do mnie, odkryjƒÖ moje prawdziwe ja i odrzucƒÖ mnie.",
  "Zostanie zdemaskowanym jako osoba gorsza lub niekompetentna by≈Çoby nie do zniesienia.",
  "Powinienem/powinnam unikaƒá nieprzyjemnych sytuacji za wszelkƒÖ cenƒô.",
  "Je≈õli czujƒô lub my≈õlƒô co≈õ nieprzyjemnego, powinienem/powinnam spr√≥bowaƒá to wymazaƒá lub odwr√≥ciƒá swojƒÖ uwagƒô (np. my≈õlƒÖc o czym≈õ innym, pijƒÖc alkohol, biorƒÖc leki/narkotyki lub oglƒÖdajƒÖc telewizjƒô).",
  "Powinienem/powinnam unikaƒá sytuacji, w kt√≥rych przyciƒÖgam uwagƒô, lub byƒá tak niepozornym/ƒÖ, jak to tylko mo≈ºliwe.",
  "Nieprzyjemne uczucia bƒôdƒÖ narastaƒá i wymknƒÖ siƒô spod kontroli.",
  "Je≈õli inni mnie krytykujƒÖ, to muszƒÖ mieƒá racjƒô.",
  "Lepiej nie robiƒá nic, ni≈º pr√≥bowaƒá czego≈õ, co mo≈ºe siƒô nie udaƒá.",
  "Je≈õli nie my≈õlƒô o problemie, to nie muszƒô nic z nim robiƒá.",
  "Jakiekolwiek oznaki napiƒôcia w relacji oznaczajƒÖ, ≈ºe psuje siƒô ona; dlatego powinienem/powinnam jƒÖ zerwaƒá.",
  "Je≈õli zignorujƒô problem, to on sam zniknie.",
  "Jestem osobƒÖ potrzebujƒÖcƒÖ pomocy i s≈ÇabƒÖ.",
  "Potrzebujƒô kogo≈õ w pobli≈ºu, kto by≈Çby dostƒôpny w ka≈ºdej chwili, aby pom√≥c mi w tym, co muszƒô zrobiƒá, lub na wypadek, gdyby sta≈Ço siƒô co≈õ z≈Çego.",
  "M√≥j opiekun/pomocnik mo≈ºe byƒá opieku≈Ñczy, wspierajƒÖcy i pewny siebie - je≈õli tylko tego chce.",
  "Jestem bezradny/a, gdy zostajƒô sam/a.",
  "W gruncie rzeczy jestem sam/a - chyba ≈ºe uda mi siƒô zwiƒÖzaƒá z silniejszƒÖ osobƒÖ.",
  "NajgorszƒÖ mo≈ºliwƒÖ rzeczƒÖ by≈Çoby zostanie porzuconym.",
  "Je≈õli nie bƒôdƒô kochany/a, zawsze bƒôdƒô nieszczƒô≈õliwy/a.",
  "Nie wolno mi zrobiƒá niczego, co mog≈Çoby uraziƒá mojego opiekuna lub osobƒô, kt√≥ra mnie wspiera.",
  "Muszƒô byƒá uleg≈Çy/a, aby zachowaƒá jego lub jej przychylno≈õƒá.",
  "Muszƒô mieƒá zapewniony dostƒôp do niego lub niej w ka≈ºdym momencie.",
  "Powinienem/powinnam pielƒôgnowaƒá tak bliskƒÖ i intymnƒÖ relacjƒô, jak to tylko mo≈ºliwe.",
  "Nie potrafiƒô samodzielnie podejmowaƒá decyzji.",
  "Nie radzƒô sobie tak dobrze, jak inni ludzie.",
  "Potrzebujƒô innych, aby pomagali mi podejmowaƒá decyzje lub m√≥wili mi, co mam robiƒá.",
  "Jestem samowystarczalny/a, ale potrzebujƒô innych, aby pomogli mi osiƒÖgnƒÖƒá moje cele.",
  "Jedynym sposobem na zachowanie szacunku do samego siebie jest zaznaczanie swojej obecno≈õci w spos√≥b po≈õredni; na przyk≈Çad poprzez niewykonywanie polece≈Ñ dok≈Çadnie.",
  "Lubiƒô byƒá zwiƒÖzany/a z lud≈∫mi, ale nie chcƒô p≈Çaciƒá za to ceny w postaci bycia zdominowanym/ƒÖ.",
  "Osoby majƒÖce w≈Çadzƒô (autorytety) majƒÖ tendencjƒô do bycia w≈õcibskimi, wymagajƒÖcymi, wtrƒÖcajƒÖcymi siƒô i kontrolujƒÖcymi.",
  "Muszƒô opieraƒá siƒô dominacji autorytet√≥w, ale jednocze≈õnie dbaƒá o ich aprobatƒô i akceptacjƒô.",
  "Bycie kontrolowanym lub dominowanym przez innych jest nie do zniesienia.",
  "Muszƒô robiƒá rzeczy po swojemu.",
  "Dotrzymywanie termin√≥w, spe≈Çnianie ≈ºƒÖda≈Ñ i dostosowywanie siƒô sƒÖ bezpo≈õrednim ciosem w mojƒÖ dumƒô i samowystarczalno≈õƒá.",
  "Je≈õli bƒôdƒô przestrzegaƒá zasad tak, jak oczekujƒÖ tego ludzie, ograniczy to mojƒÖ wolno≈õƒá dzia≈Çania.",
  "Najlepiej jest nie wyra≈ºaƒá z≈Ço≈õci bezpo≈õrednio, lecz okazywaƒá niezadowolenie poprzez niedostosowywanie siƒô.",
  "Wiem, co jest dla mnie najlepsze, a inni ludzie nie powinni mi m√≥wiƒá, co mam robiƒá.",
  "Zasady sƒÖ arbitralne (ustalone bezpodstawnie) i mnie d≈ÇawiƒÖ.",
  "Inni ludzie sƒÖ czƒôsto zbyt wymagajƒÖcy.",
  "Je≈õli uwa≈ºam kogo≈õ za zbyt w≈Çadczego, mam prawo lekcewa≈ºyƒá jego ≈ºƒÖdania.",
  "Jestem w pe≈Çni odpowiedzialny/a za siebie i innych.",
  "Muszƒô polegaƒá na sobie, aby mieƒá pewno≈õƒá, ≈ºe sprawy zostanƒÖ doprowadzone do ko≈Ñca.",
  "Inni bywajƒÖ zbyt beztroscy, czƒôsto nieodpowiedzialni, dogadzajƒÖcy sobie lub niekompetentni.",
  "Wa≈ºne jest, aby ka≈ºdƒÖ pracƒô wykonywaƒá perfekcyjnie.",
  "Potrzebujƒô porzƒÖdku, system√≥w i zasad, aby w≈Ça≈õciwie wykonaƒá zadanie.",
  "Je≈õli nie bƒôdƒô mieƒá system√≥w (organizacji), wszystko siƒô rozpadnie.",
  "Ka≈ºda wada lub b≈ÇƒÖd w wykonaniu zadania mo≈ºe doprowadziƒá do katastrofy.",
  "Przez ca≈Çy czas nale≈ºy trzymaƒá siƒô najwy≈ºszych standard√≥w, inaczej wszystko siƒô zawali.",
  "Muszƒô mieƒá ca≈ÇkowitƒÖ kontrolƒô nad swoimi emocjami.",
  "Ludzie powinni robiƒá rzeczy po mojemu.",
  "Je≈õli nie bƒôdƒô dzia≈Çaƒá na najwy≈ºszym poziomie, poniosƒô pora≈ºkƒô.",
  "Wady, defekty lub b≈Çƒôdy sƒÖ nie do przyjƒôcia.",
  "Szczeg√≥≈Çy sƒÖ niezwykle wa≈ºne.",
  "M√≥j spos√≥b robienia rzeczy jest zazwyczaj najlepszy.",
  "Muszƒô dbaƒá przede wszystkim o w≈Çasny interes.",
  "Si≈Ça lub spryt to najlepsze sposoby na za≈Çatwianie spraw.",
  "≈ªyjemy w d≈ºungli i przetrwa tylko silny.",
  "Ludzie mnie dopadnƒÖ, je≈õli ja nie dopadnƒô ich pierwszy.",
  "Dotrzymywanie obietnic czy sp≈Çacanie d≈Çug√≥w nie jest wa≈ºne.",
  "K≈Çamanie i oszukiwanie jest w porzƒÖdku, dop√≥ki nie dasz siƒô z≈Çapaƒá.",
  "Potraktowano mnie niesprawiedliwie, wiƒôc mam prawo dochodziƒá swego wszelkimi dostƒôpnymi ≈õrodkami.",
  "Inni ludzie sƒÖ s≈Çabi i zas≈ÇugujƒÖ na to, by ich wykorzystaƒá.",
  "Je≈õli nie bƒôdƒô popychaƒá innych, to inni bƒôdƒÖ popychaƒá mnie.",
  "Powinienem robiƒá wszystko, co tylko mo≈ºe mi uj≈õƒá na sucho.",
  "To, co my≈õlƒÖ o mnie inni, nie ma wiƒôkszego znaczenia.",
  "Je≈õli czego≈õ chcƒô, powinienem zrobiƒá wszystko, co konieczne, by to zdobyƒá.",
  "Potrafiƒô uniknƒÖƒá kary, wiƒôc nie muszƒô siƒô martwiƒá o z≈Çe konsekwencje.",
  "Je≈õli ludzie nie potrafiƒÖ o siebie zadbaƒá, to ich problem.",
  "Jestem wyjƒÖtkowƒÖ osobƒÖ.",
  "Skoro jestem kim≈õ lepszym, nale≈ºƒÖ mi siƒô specjalne wzglƒôdy i przywileje.",
  "Nie muszƒô przestrzegaƒá zasad, kt√≥re obowiƒÖzujƒÖ innych ludzi.",
  "Bardzo wa≈ºne jest uzyskanie uznania, pochwa≈Ç i podziwu.",
  "Je≈õli inni nie szanujƒÖ mojego statusu, powinni zostaƒá ukarani.",
  "Inni ludzie powinni zaspokajaƒá moje potrzeby.",
  "Inni ludzie powinni dostrzegaƒá, jak wyjƒÖtkowy/a jestem.",
  "To nie do zniesienia, je≈õli nie okazuje mi siƒô nale≈ºnego szacunku lub nie otrzymujƒô tego, co mi siƒô nale≈ºy.",
  "Inni ludzie nie zas≈ÇugujƒÖ na podziw lub bogactwa, kt√≥re zdobywajƒÖ.",
  "Ludzie nie majƒÖ prawa mnie krytykowaƒá.",
  "Potrzeby nikogo innego nie powinny kolidowaƒá z moimi w≈Çasnymi.",
  "Skoro jestem tak utalentowany/a, ludzie powinni robiƒá wszystko, co w ich mocy, by wspieraƒá mojƒÖ karierƒô.",
  "Tylko ludzie tak genialni jak ja sƒÖ w stanie mnie zrozumieƒá.",
  "Mam wszelkie powody, by oczekiwaƒá wielkich rzeczy.",
  "Jestem interesujƒÖcƒÖ, ekscytujƒÖcƒÖ osobƒÖ.",
  "Aby byƒá szczƒô≈õliwym/ƒÖ, potrzebujƒô, by inni po≈õwiƒôcali mi uwagƒô.",
  "Je≈õli nie bawiƒô ludzi ani nie imponujƒô im, jestem nikim.",
  "Je≈õli nie bƒôdƒô podtrzymywaƒá zainteresowania innych swojƒÖ osobƒÖ, nie bƒôdƒÖ mnie lubiƒá.",
  "Sposobem na zdobycie tego, czego chcƒô, jest ol≈õniewanie lub rozbawianie ludzi.",
  "Je≈õli ludzie nie reagujƒÖ na mnie bardzo pozytywnie, to sƒÖ do niczego.",
  "To straszne, gdy ludzie mnie ignorujƒÖ.",
  "Powinienem/powinnam byƒá w centrum uwagi.",
  "Nie muszƒô zadawaƒá sobie trudu, by wszystko przemy≈õleƒá - mogƒô kierowaƒá siƒô przeczuciem (,,instynktem‚Äù).",
  "Je≈õli bƒôdƒô zabawia≈Ç/a ludzi, nie zauwa≈ºƒÖ moich s≈Çabo≈õci.",
  "Nie potrafiƒô znie≈õƒá nudy.",
  "Je≈õli mam na co≈õ ochotƒô, powinienem/powinnam po prostu to zrobiƒá.",
  "Ludzie zwr√≥cƒÖ na mnie uwagƒô tylko wtedy, gdy bƒôdƒô zachowywaƒá siƒô w spos√≥b ekstremalny.",
  "Uczucia i intuicja sƒÖ znacznie wa≈ºniejsze ni≈º racjonalne my≈õlenie i planowanie.",
  "To, co my≈õlƒÖ o mnie inni, nie ma znaczenia.",
  "To wa≈ºne, abym by≈Ç/a wolny/a i niezale≈ºny/a od innych.",
  "Bardziej lubiƒô robiƒá rzeczy sam/a ni≈º z innymi lud≈∫mi.",
  "W wielu sytuacjach lepiej wychodzƒô na tym, gdy zostawia siƒô mnie w spokoju.",
  "Inni nie majƒÖ wp≈Çywu na to, co decydujƒô siƒô robiƒá.",
  "Bliskie relacje z innymi lud≈∫mi nie sƒÖ dla mnie wa≈ºne.",
  "Sam/a wyznaczam sobie w≈Çasne standardy i cele.",
  "Moja prywatno≈õƒá jest dla mnie znacznie wa≈ºniejsza ni≈º blisko≈õƒá z lud≈∫mi.",
  "To, co my≈õlƒÖ inni, nie ma dla mnie znaczenia.",
  "Potrafiƒô poradziƒá sobie sam/a, bez niczyjej pomocy.",
  "Lepiej byƒá samym ni≈º czuƒá siƒô ‚Äûuwiƒôzionym‚Äù (utknƒÖƒá) z innymi lud≈∫mi.",
  "Nie powinienem/powinnam zwierzaƒá siƒô innym.",
  "Mogƒô wykorzystywaƒá innych do w≈Çasnych cel√≥w, dop√≥ki nie anga≈ºujƒô siƒô w relacjƒô.",
  "Relacje sƒÖ k≈Çopotliwe i ograniczajƒÖ wolno≈õƒá.",
  "Nie mogƒô ufaƒá innym ludziom.",
  "Inni ludzie majƒÖ ukryte motywy.",
  "Inni bƒôdƒÖ pr√≥bowali mnie wykorzystaƒá lub mnƒÖ manipulowaƒá, je≈õli nie bƒôdƒô uwa≈ºaƒá.",
  "Muszƒô mieƒá siƒô na baczno≈õci przez ca≈Çy czas.",
  "Zwierzanie siƒô innym ludziom nie jest bezpieczne.",
  "Je≈õli ludzie zachowujƒÖ siƒô przyja≈∫nie, mogƒÖ pr√≥bowaƒá mnie wykorzystaƒá.",
  "Ludzie wykorzystajƒÖ mnie, je≈õli tylko dam im na to szansƒô.",
  "W przewa≈ºajƒÖcej mierze inni ludzie sƒÖ nieprzyja≈∫ni.",
  "Inni ludzie bƒôdƒÖ celowo pr√≥bowali mnie poni≈ºyƒá.",
  "Czƒôsto ludzie celowo chcƒÖ mnie irytowaƒá/denerwowaƒá.",
  "Bƒôdƒô w powa≈ºnych tarapatach, je≈õli pozwolƒô innym my≈õleƒá, ≈ºe mogƒÖ mnie ≈∫le traktowaƒá bezkarnie.",
  "Je≈õli inni ludzie dowiedzƒÖ siƒô czego≈õ o mnie, wykorzystajƒÖ to przeciwko mnie.",
  "Ludzie czƒôsto m√≥wiƒÖ jedno, a my≈õlƒÖ co innego.",
  "Osoba, z kt√≥rƒÖ jestem blisko, mog≈Çaby okazaƒá siƒô nielojalna lub niewierna."
];

    // 2. Konfiguracja Kategorii (Twoje zakresy)
    const categoriesConfig = [
        { name: "Osobowo≈õƒá UnikajƒÖca", start: 1, end: 14 },
        { name: "Osobowo≈õƒá Zale≈ºna", start: 15, end: 28 },
        { name: "Osobowo≈õƒá Bierna-Agresywna", start: 29, end: 42 },
        { name: "Osobowo≈õƒá Obsesyjno-Kompulsyjna", start: 43, end: 56 },
        { name: "Osobowo≈õƒá Antyspo≈Çeczna", start: 57, end: 70 },
        { name: "Osobowo≈õƒá Narcystyczna", start: 71, end: 86 }, // 16 pyta≈Ñ
        { name: "Osobowo≈õƒá Histrioniczna", start: 87, end: 98 }, // 12 pyta≈Ñ
        { name: "Osobowo≈õƒá Schizoidalna", start: 99, end: 112 },
        { name: "Osobowo≈õƒá Paranoiczna", start: 113, end: 126 }
    ];

 function getCategoryForIndex(idx) {
        const questionNum = idx + 1;
        return categoriesConfig.find(c => questionNum >= c.start && questionNum <= c.end);
    }

    const listDiv = document.getElementById('questions-list');
    
    rawQuestions.forEach((text, idx) => {
        const qNum = idx + 1;
        const item = document.createElement('div');
        item.className = 'question-item';
        item.innerHTML = `
            <div class="question-text">${qNum}. ${text}</div>
            <div class="options-grid">
                ${[4,3,2,1,0].map(val => `
                    <label class="option-label">
                        <input type="radio" name="q${idx}" value="${val}">
                        <div class="scale-val">${val}</div>
                        <div class="scale-desc">
                            ${val === 0 ? 'Wcale' : val === 4 ? 'Ca≈Çkowicie' : val === 1 ? 'S≈Çabo' : val === 2 ? 'Umiarkowanie' : 'Mocno'}
                        </div>
                    </label>
                `).join('')}
            </div>
        `;
        listDiv.appendChild(item);
    });

    function calculatePBQ() {
        document.getElementById('error-box').style.display = 'none';
        
        let scores = {};
        categoriesConfig.forEach(c => {
            scores[c.name] = { current: 0, max: 0, count: 0 };
        });

        let allAnswered = true;

        rawQuestions.forEach((_, idx) => {
            const selected = document.querySelector(`input[name="q${idx}"]:checked`);
            if (!selected) {
                allAnswered = false;
                return;
            }
            const points = parseInt(selected.value);
            const cat = getCategoryForIndex(idx);
            
            scores[cat.name].current += points;
            scores[cat.name].max += 4;
            scores[cat.name].count += 1;
        });

        if (!allAnswered) {
            document.getElementById('error-box').style.display = 'block';
            alert("Proszƒô odpowiedzieƒá na wszystkie 126 pyta≈Ñ przed obliczeniem wyniku.");
            return;
        }

        renderCharts(scores);
    }

    function renderCharts(scores) {
        const area = document.getElementById('charts-area');
        area.innerHTML = '';
        document.getElementById('results-section').style.display = 'block';
        document.getElementById('results-section').scrollIntoView({ behavior: 'smooth' });

        const categoryColors = [
            '#ef4444', '#f59e0b', '#eab308', '#84cc16', 
            '#10b981', '#06b6d4', '#3b82f6', '#8b5cf6', '#d946ef'
        ];

        categoriesConfig.forEach((catConf, index) => {
            const name = catConf.name;
            const data = scores[name];
            
            const container = document.createElement('div');
            container.className = 'chart-container';
            
            const percentage = Math.round((data.current / data.max) * 100);
            const color = categoryColors[index];

            container.innerHTML = `
                <div class="chart-title">
                    <span>${name}</span>
                    <span class="score-text">${data.current} / ${data.max} pkt (${percentage}%)</span>
                </div>
                <canvas id="chart-${catConf.start}"></canvas>
            `;
            area.appendChild(container);

            const ctx = container.querySelector('canvas').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Tw√≥j Wynik'],
                    datasets: [{
                        label: 'Zdobyte punkty',
                        data: [data.current],
                        backgroundColor: color,
                        borderRadius: 8,
                        barThickness: 40
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    scales: {
                        x: {
                            min: 0,
                            max: data.max,
                            title: { display: true, text: 'Punkty', font: { size: 14, weight: 'bold' } },
                            grid: { color: '#e2e8f0' }
                        },
                        y: { display: false }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: { 
                            enabled: true,
                            backgroundColor: 'rgba(0,0,0,0.8)',
                            padding: 12,
                            titleFont: { size: 14 },
                            bodyFont: { size: 13 }
                        }
                    }
                }
            });
        });
    }
</script>

</body>
</html>